---
import fetchApi from '../lib/strapi';
import type { AboutType } from '../types/about-type';

const about: AboutType = await fetchApi({
  endpoint: 'about', // the content type to fetch
  wrappedByKey: 'data', // the key to unwrap the response
  more: false,
});

// console.log(about);

import Instagram from '../svg/instagram.astro';
import LinkedIn from '../svg/linkedin.astro';
import GitHub from '../svg/github.astro';
import Phone from './phone.astro';

---
<footer class="site-footer">
  <div class="footer_info">
    <div class="footer_copyright">
      <ul>
        <li>
          <a href="/" rel="home">Home</a>
        </li>
        <li>
          {about.established} - {new Date().getFullYear()}
        </li>
        <li>
          <a href="/now">Now</a>
        </li>
      </ul>
    </div>{/* .footer_copyright */}

    <nav id="bottom-menu" class="">
      <ul>
        {/* // TODO need to build search */}
        {/* <li key="search"><Link to='/search'>Search</Link></li> */}
        <li><a href="/project">Projects</a></li>
        <li><a href="/blog">Blog</a></li>
        <li>
          <a href="/styleguide">Styleguides</a>
        </li>
        {
          /* I can do something more interesting with this as a show whats available maybe an accordian or work in with what I already have */
        }
      </ul>
    </nav>

    {/* https://developer.mozilla.org/en-US/docs/Web/HTML/Element/address */}
    <address class="footer_contact">
      {/* // TODO: add some more details to this ie subject */}
      <p>
        <a href={`mailto:${about.email}`}>
          {about.email}
        </a>
      </p>
      <p>
          <Phone phone={about.phone} />
      </p>
    </address>
  </div>

  <div class="background-primary background-primary__social-icons">
    <div class="social-icons">
      <div class="fp-box">
        <a href={`https://www.instagram.com/${about.instagram}/`}>
          <Instagram />
        </a>
      </div>
      <div class="fp-box">
          <a href={`https://www.linkedin.com/in/${about.linkedin}/`}>
            <LinkedIn />
          </a>
        </div>
      {/* // TODO: add a link to /rss.xml */}
      <div>
        <!-- <a href="/rss.xml"> -->
          {/* // ! this doesnt work yet */}
          <!-- <RSS /> -->
        <!-- </a> -->
      </div>
      <div class="fp-box">
        <a href={`https://github.com/${about.github}/`}>
          <GitHub />
        </a>
      </div>
    </div>
  </div>
</footer>
